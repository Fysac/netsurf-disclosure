==35947==ERROR: AddressSanitizer: heap-use-after-free on address 0x50e0000d4a40 at pc 0x55e538a019b3 bp 0x7fff242a1090 sp 0x7fff242a1088
READ of size 8 at 0x50e0000d4a40 thread T0
    #0 0x55e538a019b2 in dom_node_get_node_type /home/ubuntu/dev-netsurf/workspace/inst-x86_64-linux-gnu/include/dom/core/node.h:244:36
    #1 0x55e538a019b2 in dukky_node_nodeType_getter /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/Node.bnd:34:8
    #2 0x55e538c3ff0d in duk__handle_call_raw /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c
    #3 0x55e538b3e7b5 in duk_handle_call_unprotected /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:68507:9
    #4 0x55e538b3e7b5 in duk_call_method /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:15357:2
    #5 0x55e538b3e7b5 in duk_hobject_getprop /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:60864:4
    #6 0x55e538c59c38 in duk__js_execute_bytecode_inner /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:81488:4
    #7 0x55e538c448d2 in duk_js_execute_bytecode /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:80167:4
    #8 0x55e538c3ffdd in duk__handle_call_raw /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:68335:3
    #9 0x55e538b8416b in duk_handle_call_unprotected /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:68507:9
    #10 0x55e538b8416b in duk__pcall_method_raw /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:15430:8
    #11 0x55e538b2b5cf in duk__handle_safe_call_inner /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:68560:7
    #12 0x55e538b2b5cf in duk_handle_safe_call /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:68806:3
    #13 0x55e538b2ab96 in duk_safe_call /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:15525:7
    #14 0x55e538b2ab96 in duk_pcall_method_flags /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:15449:9
    #15 0x55e538b2ab96 in duk_pcall_method /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:15455:9
    #16 0x55e538b208ba in js_fire_event /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/dukky.c:1649:6
    #17 0x55e538aa8a2e in html_finish_conversion /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/html/html.c:385:3
    #18 0x55e538aaa1f3 in html_begin_conversion /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/html/html.c:997:3
    #19 0x55e538a96235 in html_convert_css_callback /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/html/css.c:140:3
    #20 0x55e538c98d56 in hlcache_content_callback /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/hlcache.c:205:11
    #21 0x55e538a3415a in content_broadcast /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/content.c:762:4
    #22 0x55e538a3415a in content_set_done /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/content.c:308:2
    #23 0x55e538a5c04e in nscss_content_done /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/css/css.c:509:2
    #24 0x55e538a5b39a in nscss_convert_css_data /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/css/css.c:324:3
    #25 0x55e538a5b39a in nscss_convert /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/css/css.c:292:10
    #26 0x55e538a33797 in content_convert /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/content.c:84:7
    #27 0x55e538a33797 in content_llcache_callback /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/content.c:140:4
    #28 0x55e538ca7abc in llcache_object_notify_users /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/llcache.c:3530:12
    #29 0x55e538ca6f87 in llcache_catch_up_all_users /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/llcache.c:3692:3
    #30 0x55e538d5ef60 in schedule_run /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/frontends/gtk/schedule.c:148:25
    #31 0x55e538d42c74 in nsgtk_main /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/frontends/gtk/gui.c:1073:3
    #32 0x55e538d42c74 in main /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/frontends/gtk/gui.c:1233:2
    #33 0x7fca879d2d8f in __libc_start_call_main csu/../sysdeps/nptl/libc_start_call_main.h:58:16
    #34 0x7fca879d2e3f in __libc_start_main csu/../csu/libc-start.c:392:3
    #35 0x55e538862c14 in _start (/home/ubuntu/dev-netsurf/workspace-fresh/netsurf/nsgtk3+0x1acc14)

0x50e0000d4a40 is located 0 bytes inside of 152-byte region [0x50e0000d4a40,0x50e0000d4ad8)
freed by thread T0 here:
    #0 0x55e5388fcbe6 in free /home/ubuntu/llvm-project/compiler-rt/lib/asan/asan_malloc_linux.cpp:52:3
    #1 0x55e538ebb899 in dom_node_destroy /home/ubuntu/dev-netsurf/workspace-fresh/libdom/src/core/node.h:249:2
    #2 0x55e538ebb899 in _dom_node_try_destroy /home/ubuntu/dev-netsurf/workspace-fresh/libdom/src/core/node.c:2275:4
    #3 0x55e5389ff046 in dom_node_normalize /home/ubuntu/dev-netsurf/workspace/inst-x86_64-linux-gnu/include/dom/core/node.h:401:9
    #4 0x55e5389ff046 in dukky_node_normalize /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/Node.bnd:262:8
    #5 0x55e538c4f58f in duk_handle_call_unprotected /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:68507:9
    #6 0x55e538c4f58f in duk__executor_handle_call /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:79883:20
    #7 0x55e538c4f58f in duk__js_execute_bytecode_inner /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:82011:8
    #8 0x55e538c448d2 in duk_js_execute_bytecode /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:80167:4
    #9 0x55e538c3ffdd in duk__handle_call_raw /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:68335:3
    #10 0x55e538b8416b in duk_handle_call_unprotected /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:68507:9
    #11 0x55e538b8416b in duk__pcall_method_raw /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:15430:8
    #12 0x55e538b2ab96 in duk_safe_call /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:15525:7
    #13 0x55e538b2ab96 in duk_pcall_method_flags /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:15449:9
    #14 0x55e538b2ab96 in duk_pcall_method /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/duktape.c:15455:9
    #15 0x55e538b208ba in js_fire_event /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/javascript/duktape/dukky.c:1649:6
    #16 0x55e538aa8a2e in html_finish_conversion /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/html/html.c:385:3
    #17 0x55e538aaa1f3 in html_begin_conversion /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/html/html.c:997:3
    #18 0x55e538a96235 in html_convert_css_callback /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/html/css.c:140:3

previously allocated by thread T0 here:
    #0 0x55e5388fce7f in malloc /home/ubuntu/llvm-project/compiler-rt/lib/asan/asan_malloc_linux.cpp:68:3
    #1 0x55e538f0e81e in _dom_text_create /home/ubuntu/dev-netsurf/workspace-fresh/libdom/src/core/text.c:83:6
    #2 0x55e538eadd1a in dom_document_create_text_node /home/ubuntu/dev-netsurf/workspace-fresh/libdom/include/dom/core/document.h:187:9
    #3 0x55e538eadd1a in create_text /home/ubuntu/dev-netsurf/workspace-fresh/libdom/bindings/hubbub/parser.c:297:8
    #4 0x55e538f3476b in append_text /home/ubuntu/dev-netsurf/workspace-fresh/libhubbub/src/treebuilder/treebuilder.c:888:10
    #5 0x55e538f3c434 in process_character /home/ubuntu/dev-netsurf/workspace-fresh/libhubbub/src/treebuilder/in_body.c:216:9
    #6 0x55e538f3c434 in handle_in_body /home/ubuntu/dev-netsurf/workspace-fresh/libhubbub/src/treebuilder/in_body.c:143:9
    #7 0x55e538f33b39 in hubbub_treebuilder_token_handler /home/ubuntu/dev-netsurf/workspace-fresh/libhubbub/src/treebuilder/treebuilder.c:246:10
    #8 0x55e538eac571 in dom_hubbub_parser_completed /home/ubuntu/dev-netsurf/workspace-fresh/libdom/bindings/hubbub/parser.c:1043:8
    #9 0x55e538a96235 in html_convert_css_callback /home/ubuntu/dev-netsurf/workspace-fresh/netsurf/content/handlers/html/css.c:140:3

SUMMARY: AddressSanitizer: heap-use-after-free /home/ubuntu/dev-netsurf/workspace/inst-x86_64-linux-gnu/include/dom/core/node.h:244:36 in dom_node_get_node_type
Shadow bytes around the buggy address:
  0x50e0000d4780: fa fa fa fa 00 00 00 00 00 00 00 00 00 00 00 00
  0x50e0000d4800: 00 00 00 00 00 00 00 fa fa fa fa fa fa fa fa fa
  0x50e0000d4880: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x50e0000d4900: 00 00 00 fa fa fa fa fa fa fa fa fa 00 00 00 00
  0x50e0000d4980: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 fa
=>0x50e0000d4a00: fa fa fa fa fa fa fa fa[fd]fd fd fd fd fd fd fd
  0x50e0000d4a80: fd fd fd fd fd fd fd fd fd fd fd fa fa fa fa fa
  0x50e0000d4b00: fa fa fa fa 00 00 00 00 00 00 00 00 00 00 00 00
  0x50e0000d4b80: 00 00 00 00 00 00 00 fa fa fa fa fa fa fa fa fa
  0x50e0000d4c00: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  0x50e0000d4c80: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
Shadow byte legend (one shadow byte represents 8 application bytes):
  Addressable:           00
  Partially addressable: 01 02 03 04 05 06 07
  Heap left redzone:       fa
  Freed heap region:       fd
  Stack left redzone:      f1
  Stack mid redzone:       f2
  Stack right redzone:     f3
  Stack after return:      f5
  Stack use after scope:   f8
  Global redzone:          f9
  Global init order:       f6
  Poisoned by user:        f7
  Container overflow:      fc
  Array cookie:            ac
  Intra object redzone:    bb
  ASan internal:           fe
  Left alloca redzone:     ca
  Right alloca redzone:    cb
==35947==ABORTING
